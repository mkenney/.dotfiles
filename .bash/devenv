
#
# Return the list of standard and custom commands as well as current
# container names for tab-completion
#
function _devenv_autocomplete {

	local cur prev opts _docker_container_names
	COMPREPLY=()

	_docker_container_names=""
	# Add all current container names to the auto-complete command list
	if [ "" != "$(docker ps -aq --no-trunc)" ]; then
		for a in $(docker inspect --format='{{.Name}}' $(docker ps -aq --no-trunc) | grep devenv); do
			_docker_container_names="$_docker_container_names ${a:1:${#a}-1}"
		done
	fi

	cur="${COMP_WORDS[COMP_CWORD]}"
	prev="${COMP_WORDS[COMP_CWORD-1]}"
	opts="${_docker_commands} ${_docker_custom_commands} ${_docker_container_names}"

	COMPREPLY=( $(compgen -W "${opts}" -- ${cur}) )
	return 0
}
complete -o default -F _devenv_autocomplete devenv
