
# add 'build-jenkins' to the current list of auto-complete commands
eval "original_$(declare -f git_autocomplete_commands)"
#git_autocomplete_commands () {
#    echo "$(current_autocomplete_commands) build-jenkins"
#}
#current_autocomplete_commands=$(git_autocomplete_commands)
function git_autocomplete_commands {
#    echo "hi"
    echo "$(original_git_autocomplete_commands) build-jenkins"
}
export -f git_autocomplete_commands

#
#
#
function build-jenkins {
    current_git_project=$(git remote -v | head -n1 | awk '{print $2}' | sed 's/.*\///' | sed 's/\.git//')
    case "$1" in
        # Continuous-integration environment build
        # Test environment build
        # Production environment build
        "ci" | "test" | "prod")
            command ~/.bash/lib/git-gerrit-jenkins/build.py $1 ${current_git_project}
        ;;

        # Default
        *)
            echo "Unknown build target '$1'"
        ;;
    esac
}
